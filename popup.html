<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { width: 620px; min-height: 400px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 12px; color: #333; background: #f8f9fa; }
.header { background: #1a1a2e; color: #fff; padding: 10px 14px; font-size: 14px; font-weight: 600; }
.tabs { display: flex; border-bottom: 2px solid #e0e0e0; background: #fff; }
.tab { flex: 1; padding: 8px; text-align: center; cursor: pointer; font-weight: 600; color: #666; border-bottom: 2px solid transparent; margin-bottom: -2px; }
.tab.active { color: #e63946; border-bottom-color: #e63946; }
.tab:hover { background: #f0f0f0; }
.filters { display: flex; gap: 6px; padding: 8px 10px; background: #fff; border-bottom: 1px solid #e0e0e0; align-items: center; }
.filters input { padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-size: 11px; }
.filters input[type="text"] { width: 120px; }
.filters input[type="date"] { width: 120px; }
.btn { padding: 4px 10px; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 600; }
.btn-export { background: #0e8a16; color: #fff; }
.btn-export:hover { background: #0b7013; }
.btn-load { background: #1a73e8; color: #fff; width: 100%; padding: 8px; margin-top: 4px; }
.btn-load:hover { background: #1557b0; }
.table-wrap { overflow-x: auto; padding: 0 10px 10px; }
table { width: 100%; border-collapse: collapse; background: #fff; margin-top: 8px; font-size: 11px; }
th { background: #f0f0f0; padding: 6px 8px; text-align: left; font-weight: 600; white-space: nowrap; border-bottom: 2px solid #ddd; position: sticky; top: 0; }
td { padding: 5px 8px; border-bottom: 1px solid #eee; white-space: nowrap; }
tr:hover td { background: #f5f8ff; }
.status { padding: 8px 10px; color: #666; text-align: center; }
.error { color: #e63946; }
.rates-detail { font-size: 10px; color: #555; white-space: normal; max-width: 400px; }
.expand-btn { cursor: pointer; color: #1a73e8; text-decoration: underline; }
.lounge-yes { color: #e63946; font-weight: 600; }
.breakfast-yes { color: #0e8a16; font-weight: 600; }
.cal-controls { display: flex; gap: 8px; align-items: center; margin-bottom: 8px; }
.cal-controls select { padding: 4px 6px; border: 1px solid #ccc; border-radius: 4px; font-size: 11px; max-width: 200px; }
.cal-heatmap { overflow-x: auto; }
.cal-hm-row { display: flex; align-items: center; }
.cal-hm-label { width: 26px; flex-shrink: 0; font-size: 10px; font-weight: 600; color: #555; text-align: right; padding-right: 4px; }
.cal-hm-cells { display: flex; gap: 1px; }
.cal-hm-hdr { width: 14px; height: 14px; text-align: center; font-size: 8px; color: #999; line-height: 14px; flex-shrink: 0; }
.cal-hm-hdr.month-start { font-weight: 600; color: #333; font-size: 7px; }
.cal-hm-hdr.weekend { color: #e63946; }
.cal-hm-sep { width: 1px; height: 14px; background: #ccc; flex-shrink: 0; margin: 0 1px; }
.cal-hm-cell { width: 14px; height: 14px; border-radius: 2px; flex-shrink: 0; position: relative; cursor: default; }
.cal-hm-cell.no-data { background: #eee; }
.cal-hm-cell.cheapest { outline: 2px solid #0e8a16; outline-offset: -1px; z-index: 1; }
.cal-hm-tip { position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); background: #333; color: #fff; font-size: 9px; padding: 2px 4px; border-radius: 3px; white-space: nowrap; display: none; z-index: 20; pointer-events: none; margin-bottom: 2px; }
.cal-hm-cell:hover .cal-hm-tip { display: block; }
.cal-legend { display: flex; gap: 10px; font-size: 10px; margin-top: 8px; color: #666; align-items: center; }
.cal-legend-swatch { display: inline-block; width: 12px; height: 12px; border-radius: 2px; vertical-align: middle; margin-right: 3px; }
.cal-legend .cheapest-swatch { outline: 2px solid #0e8a16; outline-offset: -1px; }
</style>
</head>
<body>
<div class="header">Accor Executive Lounge â€” Rate History <span id="version" style="float:right;font-size:11px;font-weight:400;opacity:0.6"></span></div>
<div class="tabs">
  <div class="tab active" data-tab="prices">Prices</div>
  <div class="tab" data-tab="rates">Rates</div>
  <div class="tab" data-tab="calendar">Calendar</div>
</div>
<div class="filters">
  <input type="text" id="filterHotel" placeholder="Hotel ID or name">
  <input type="date" id="filterFrom">
  <input type="date" id="filterTo">
  <button class="btn btn-export" id="btnExport">Export CSV</button>
</div>
<div class="table-wrap">
  <div id="status" class="status">Loading...</div>
  <table id="dataTable" style="display:none"><thead id="tableHead"></thead><tbody id="tableBody"></tbody></table>
  <button class="btn btn-load" id="btnLoadMore" style="display:none">Load More</button>
</div>
<div id="calendarWrap" style="display:none; padding:10px;">
  <div class="cal-controls">
    <select id="calHotel"></select>
    <button class="btn" id="calPrev">&#9664;</button>
    <span id="calMonthLabel" style="font-weight:600;font-size:12px;min-width:140px;text-align:center;"></span>
    <button class="btn" id="calNext">&#9654;</button>
  </div>
  <div id="calStatus" class="status" style="text-align:left;padding:4px 0;font-size:10px;color:#888;"></div>
  <div id="calHeatmap" class="cal-heatmap"></div>
  <div class="cal-legend">
    <span><span class="cal-legend-swatch" style="background:hsl(120,70%,45%)"></span>Cheap</span>
    <span><span class="cal-legend-swatch" style="background:hsl(60,70%,45%)"></span>Mid</span>
    <span><span class="cal-legend-swatch" style="background:hsl(0,70%,45%)"></span>Expensive</span>
    <span><span class="cal-legend-swatch cheapest-swatch" style="background:hsl(120,70%,45%)"></span>Best Price</span>
    <span><span class="cal-legend-swatch" style="background:#eee"></span>No data</span>
  </div>
</div>
<script src="config.js"></script>
<script src="popup.js"></script>
</body>
</html>
